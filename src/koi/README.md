# koi core
Handles the common needs of javascript web applications, defines a namespace
for customized extension. The koi system requires jQuery (1.6.4).

# Startup
When a koi application is being executed, it progresses through six (6) stages
of setup. Once all stages are completed, KOI dispatches its ready event, which 
indicates that the application is stable and can now be used.

In a technical sense, the entire startup sequence of a koi application refers
to everything that happens before the ready event is dispatched. Within koi,
the ready event being dispatched is dependent on the `KOI.readyQueue` object.

The ready queue is simply an object which contains named booleans. The koi core
will dispatch its ready event only when `KOI.makeReady()` is called and the
ready queue contains no keys which are "false".

The point of handling readying in this way is to allow arbitrary delay of the
ready event. For example:
    KOI.readyQueue.foobar = false;
    KOI.makeReady(); // No effect
    KOI.readyQueue.foobar = true;
    KOI.makeReady(); // Triggers the ready event

## 1. Code loading
The first step of any application's execution is to include its code. This
process is handled differently between the development environment and any
release code.

### Development
When in the development environment, a koi application's code-loading is
managed by the koi bootstrap. During the development process, the bootstrap 
creates and processes an application's dependency tree and loads resources 
dynamically. Once all the application code has finished loading, the koi
bootstrap marks the code as having been loaded.

### Release
For release code generated by a build system, a koi application's code-loading
is implicit. Unlike development, when release code is executed, all of the 
application code is condensed into a single script. 

## 2. Document ready
The browser's document ready event is a prerequisite for the koi system's ready
event. During the development process, the document ready event will occur
BEFORE code-loading because of the bootstrapping process. In release code, the
document ready event will occur AFTER code-loading.

Custom application code can utilize the document ready event from jQuery if
they need to execute before the application is ready. However, the execution
code of most plugins and the application itself should wait for the koi 
system's ready event.

## 3. Initialization
The initialization stage of startup must be triggered by the application. This
is done by executing the following within the application code:
    KOI.initialize(language);

This will dispatch the "initialized" event, which is a signal that the
application has completed all of it's custom startup events. The best example
of this would be authentication. If an application requires no authentication,
it can simply call initialize and be done with it. However, if the application
does require some kind of authorization then the initialize call should be
postponed until some included plugin can determine if access should be granted.

Application code which wants to listen for this event should bind it's handler
using the auto-dispatch method:
    KOI.initialized(listener);  // Dispatches immediately if initialized

Application code can check `KOI.isInitialized` if a boolean determination must 
be made.

## 4. Localization loading
After the initialize event is dispatched, koi will load a localization
document of the language provided during initialize. When the localization has
been loaded and is available, the "localization-loaded" event is dispatched.

Application code which wants to listen for this event should bind its handler
using the auto-dispatch method:
    KOI.localizable(listener); // Dispatches immediately if localization exists

Application code can check `KOI.hasLocalization` if a boolean determination
must be made.

## 5. Components loading
Once application localization document has been loaded, the koi system will
begin loading in active components. If any components have been flagged as
"required" the system will wait until they have been included before
dispatching the ready event.

If any required components are declared, the key "components" will be added to
the ready queue and set to false until all required components are loaded.

## 6. Readying
Finally, once the `KOI.readyQueue` object contains no "false" values, a call
to `KOI.makeReady()` will dispatch the ready event.

Application code which wants to listen for this event should bind its handler
using the auto-dispatch method:
    KOI.ready(listener); // Dispatches immediately if koi is ready

Application code can check `KOI.isReady` if a boolean determination must be 
made.

# Events
# Plugin
# Components
# Cookies
# Configuration
# URL parsing
# Cross-domain messaging
# Stylesheet creation
